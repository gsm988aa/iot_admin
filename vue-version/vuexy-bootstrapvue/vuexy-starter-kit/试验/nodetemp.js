const express = require('express');
const cors = require('cors');
const app = express();

const IP_ADDRESS1 = '192.168.2.51';
const PORT = 3000;

app.use(cors());

const data = [
  {
    "tongpai":"20.50, 12.75, 11.75, 11.25, 10.75, 12.25, 12.75, 12.25, 12.50, 8.75, 9.25, 10.75, 10.75, 11.50, 12.50, 13.00, 9.50, 7.75, 8.00, 8.50, 9.75, 12.25, 13.25, 13.75, 8.75, 8.00, 7.50, 8.50, 12.75, 22.25, 19.50, 14.50, 8.50, 9.00, 9.50, 16.25, 25.25, 27.50, 21.00, 16.25, 16.50, 19.00, 24.75, 26.50, 27.50, 25.75, 18.75, 25.25, 27.25, 27.25, 28.00, 28.00, 27.00, 18.50, 24.00, 27.25, 28.00, 28.75, 28.25, 27.00, 17.50, 22.75, 27.00, 26.75"
  },
  {
    "tongpai":"20.50, 12.75, 11.75, 11.25, 10.75, 12.25, 12.75, 12.25, 12.50, 8.75, 9.25, 10.75, 10.75, 11.50, 12.50, 13.00, 9.50, 7.75, 8.00, 8.50, 9.75, 12.25, 13.25, 13.75, 8.75, 8.00, 7.50, 8.50, 12.75, 22.25, 19.50, 14.50, 8.50, 9.00, 9.50, 16.25, 25.25, 27.50, 30.00, 16.25, 16.50, 19.00, 24.75, 26.50, 27.50, 25.75, 18.75, 25.25, 27.25, 27.25, 28.00, 28.00, 27.00, 18.50, 24.00, 27.25, 28.00, 28.75, 28.25, 27.00, 17.50, 22.75, 27.00, 26.75"
  },
  {
    "tongpai":"20.50, 12.75, 11.75, 11.25, 10.75, 12.25, 12.75, 12.25, 12.50, 8.75, 9.25, 10.75, 10.75, 11.50, 12.50, 13.00, 9.50, 7.75, 8.00, 8.50, 9.75, 12.25, 13.25, 13.75, 8.75, 8.00, 7.50, 8.50, 12.75, 22.25, 19.50, 14.50, 8.50, 9.00, 9.50, 16.25, 25.25, 27.50, 21.00, 16.25, 16.50, 19.00, 24.75, 26.50, 27.50, 25.75, 18.75, 25.25, 27.25, 27.25, 28.00, 29.00, 27.00, 18.50, 24.00, 27.25, 28.00, 28.75, 28.25, 27.00, 17.50, 22.75, 27.00, 26.75"
  }
];

let currentIndex = 0;

// Function to send data
function sendData(res) {
  res.json(data[currentIndex]);
  currentIndex = (currentIndex + 1) % data.length; // Move to next data or wrap around
}

// Route handler for /tongpai
app.get('/tongpai', (req, res) => {
  sendData(res);
});

// Set interval to send data every 3 seconds
setInterval(() => {
  app.get('/tongpai', (req, res) => {
    sendData(res);
  });
}, 3000);

app.listen(PORT, IP_ADDRESS1, () => {
  console.log(`Server is running at http://${IP_ADDRESS1}:${PORT}`);
});
